<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <title>Canvas03_房产证</title>
        <style type="text/css">
            * {
                margin: 0;
                padding: 0;
            }
            
            #Canvas {
                border: 1px solid gold;
                margin: 50px auto 0;
                display: block;
            }
        </style>
    </head>

    <body>

        <canvas id="Canvas">
            <!--如果不设置宽高,默认300*150-->
            您的浏览器不支持Canvas, 请升级浏览器
        </canvas>
        <input type="text" placeholder="请输入业主的名字"/>
        <button onclick="createZ()">生成房产证</button>
        <button onclick="exportZ()">导出房产证</button>
        <img src="" alt="" />
        <script type="text/javascript">
            //1.获取Canvas元素
            var canvas = document.getElementById("Canvas");

            canvas.width = 1000;
            canvas.height = 500;

            //2.获取 2D渲染上下文对象(核心).
            var content = canvas.getContext("2d");
            //3.
            var img = new Image();
            img.src = "img/zheng.jpg";
            img.onload = function(){
                content.drawImage(this, 0, 0, 549, 412, 0, 0, 549, 412);
            }
            
            
            
            function createZ() {
                var inputV = document.querySelector("input").value;
                
                content.fillStyle = "rgb(104,103,95)";
                content.fillText(inputV, 180, 120);
            }
            function exportZ() {
                //toDataURL() 将canvas里的图像转换成base64的编码结构.img标签可以直接接收base64的编码 展示图片. 该方法属于canvas标签
                
                var base64Url = canvas.toDataURL();
                console.log(base64Url);
                var img = document.querySelector("img");
                img.src = base64Url;
                
            }
            
        </script>
    </body>

</html>