<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <title>Canvas07_绘制视频</title>
        <style type="text/css">
            * {
                margin: 0;
                padding: 0;
            }
            
            #Canvas {
                border: 1px solid gold;
                margin: 50px auto 0;
                display: block;
            }
        </style>
    </head>

    <body>

        <canvas id="Canvas">
            <!--如果不设置宽高,默认300*150-->
            您的浏览器不支持Canvas, 请升级浏览器
        </canvas>
        <video src="video/HTML5的前世今生.mp4" style="display: none;"></video>
        <script type="text/javascript">
            //1.获取Canvas元素
            var canvas = document.getElementById("Canvas");

            canvas.width = 1000;
            canvas.height = 500;

            //2.获取 2D渲染上下文对象(核心).
            var content = canvas.getContext("2d");

            //3. 
            var video = document.querySelector("video");

            video.oncanplay = function() {
                video.play();
                //              setInterval(function(){
                //                  //清空画布
                //                  content.clearRect(0, 0, canvas.width, canvas.height);
                //                  //重新绘制
                //                  content.drawImage(video, 0, 0, canvas.width, canvas.height);
                //              }, 16);
                refreshWeb();
            }

            function refreshWeb() {
                //清空画布
                content.clearRect(0, 0, canvas.width, canvas.height);
                //重新绘制
                content.drawImage(video, 0, 0, canvas.width, canvas.height);
                //让浏览器自己根据自己的刷新频率调用方法
                window.requestAnimationFrame(refreshWeb);
            }
        </script>
    </body>

</html>